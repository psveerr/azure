Generating and Uploading Logs

In this lab we focus on generating logs from the Terraform pipeline and uploading them to an Azure Blob Storage container. Logs are important for auditing, troubleshooting, compliance verification, and cost management.

Step 1: Add logging steps in the pipeline. These steps will handle the generation of logs and their upload to Azure Blob Storage. The logs include compliance checks, cost estimation, and cost difference outputs.

<img width="1601" height="746" alt="Screenshot from 2025-08-30 19-49-49" src="https://github.com/user-attachments/assets/b0debaef-54f9-4fa6-b5b6-92b662e25ac2" />

Step 2: Generating logs. Three types of logs are generated:

Terraform compliance (TFSEC) which captures results from compliance checks to verify whether the Terraform code follows defined security and compliance rules.

Terraform cost estimation (Infracost) which produces a detailed cost estimation of infrastructure defined in the Terraform plan, generally exported in HTML format.

Terraform cost difference (Infracost) which compares the current and desired state of infrastructure to identify potential cost changes caused by updates.

Step 3: Upload compliance report. The compliance report generated by TFSEC is uploaded to Azure Blob Storage. For this step an active Azure subscription and a storage account with a container are required. The file is named based on the build definition and build number to ensure unique identification for each pipeline run.

<img width="1602" height="804" alt="Screenshot from 2025-08-30 19-51-13" src="https://github.com/user-attachments/assets/ace5db4b-faf9-42bd-bb5f-eb5ec6909d7b" />

Step 4: Upload cost estimation report. The cost estimation report is uploaded in HTML format to the configured Azure storage container. This provides stakeholders with a breakdown of predicted infrastructure costs and can be opened in a browser for easy visualization.

<img width="1601" height="860" alt="Screenshot from 2025-08-30 19-52-10" src="https://github.com/user-attachments/assets/58ecc7ff-950d-4cd9-998b-344eb256dd69" />

Step 5: Upload cost difference report. The cost difference report shows the financial delta between the current state of infrastructure and the desired state defined in the Terraform plan. This report helps in decision making before applying changes to production and is also uploaded to Azure Blob Storage for secure storage and historical reference.

<img width="1602" height="918" alt="Screenshot from 2025-08-30 19-53-02" src="https://github.com/user-attachments/assets/9495df2b-66f4-429b-9b1b-75620d12caff" />
